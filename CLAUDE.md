# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Base8192 encoding library that converts binary data into human-readable CJK characters. The encoding maps **3 bytes to 2 CJK characters** (double efficiency of Base64), achieving a 3:2 character ratio through 12-bit chunk encoding with self-synchronization.

## Commands

- **Run tests**: `make test` or `node test.js`
- **Start local server**: `make serve` (runs PHP server on localhost:8090)
- **Build for GitHub Pages**: `make publish` (copies app.js, app.css, base8192.js to docs/ directory)

## Architecture

### Core Encoding System

The project implements a self-synchronizing Base8192 encoding:

- **Encoding ratio**: 3 bytes → 2 CJK characters (plus optional padding)
- **Character pairs**: Uses "left" and "right" character sets for self-synchronization
  - **Left characters**: U+4E00 - U+5DFF (一 to 巿) - 4096 characters
  - **Right characters**: U+5E00 - U+6DFF (帀 to 淿) - 4096 characters
- **Padding**: Uses "等" (U+7B49) to indicate incomplete bytes
- **Error handling**: Invalid pairs replaced with U+FFFD (�) during decode

### File Structure

- `base8192.js`: Core encoding/decoding library with class-based implementation
- `test.js`: Test suite with custom test framework (`assertSame`, `test`)
- `app.js`: Web application entry point
- `app.css`: Web application styles
- `index.html`: Interactive encoder/decoder web interface
- `docs/`: GitHub Pages deployment directory (generated by `make publish`)

### Key Implementation Details

- **ES6 modules**: Uses `import`/`export` syntax
- **Core classes**:
  - `TwelveBits` (base8192.js:35): Represents a 12-bit value with type (LEFT, RIGHT, or PADDING)
  - `TwelveBitsPair` (base8192.js:91): Represents a pair of 12-bit values (encodes/decodes 1-3 bytes)
- **Core functions**:
  - `encode()` (base8192.js:200): Converts byte array to Base8192 string
  - `decode()` (base8192.js:240): Converts Base8192 string to byte array with error reporting
  - `stringToUint8Array()` (base8192.js:25): UTF-8 string to byte array conversion
- **Test framework**: Custom implementation with `assertSame()` and `test()` utilities
- **No npm dependencies**: Pure JavaScript implementation

## Development Workflow

When modifying encoding logic:
1. Update classes/functions in `base8192.js`
2. Run `make test` to verify correctness
3. Test interactively with `make serve` (opens localhost:8090)
4. Run `make publish` to deploy to docs/ for GitHub Pages

## Demo

Live demo: https://karintomania.github.io/Human-Readable-Base8192/
